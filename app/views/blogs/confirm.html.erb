<h3><%= @group.name%><%= t '.is_the_blog_content_okay?' %></h3>

<%= form_with(model:[@group, @blog], local: true) do |form| %>
  <%= form.hidden_field :title %>
  <%= form.hidden_field :event_date %>
  <%= form.hidden_field :content %>
  <%= form.hidden_field :photo_cache %>
  <%= form.hidden_field :email_notice %>
  <%= form.hidden_field :address %>

  <p><%= t 'blogs.index.title' %>: <%= @blog.title %></p>
  <p><%= t 'blogs.index.event_date' %>: <%= l @blog.event_date, format: :date if @blog.event_date %></p>
  <p><%= t 'blogs.index.content' %>: <%= @blog.content %></p>
  <p><%= t 'blogs.index.photo' %>: <%= image_tag(@blog.photo.url) if @blog.photo && @blog.photo.url %></p>
  <p><%= t 'blogs.index.email_notice' %>: <%= form.check_box :email_notice, {disabled: :true} %></p>
  <p><%= t 'blogs.form.event_address' %>: <%= @blog.address %></p>

  <div id='map'></div>

  <style>
    #map {
      height: 400px;
      width: 400px;
    }
  </style>

  <script>
    let map

    const display = document.getElementById('display')

    // mapの表示関数 
    function initMap() {
      geocoder = new google.maps.Geocoder()
  
    // mapの初期位置, 縮尺を定義
    map = new google.maps.Map(document.getElementById('map'), {
      center: {
        lat: @lat,
        lng: @lng
      },
      zoom: 12,
    });
  }

    let geocoder

  //   // 地図検索関数
  //   function codeAddress() {
  //     let inputAddress = document.getElementById('address').value;
  //     geocoder = new google.maps.Geocoder()

  //     geocoder.geocode({
  //       'address': inputAddress
  //     }, function (results, status) {
        
  //       if (status == 'OK') {
  //         map.setCenter(results[0].geometry.location);
  //         if (typeof marker != 'undefined') {
  //           marker.setMap(null);
  //         }
  //         marker = new google.maps.Marker({
  //         map: map,
  //         position: results[0].geometry.location
  //         });

  //         let hidden_address = document.getElementById('hidden_address');
  //         hidden_address.setAttribute("value", inputAddress);
  //         } else {
  //       alert('<%= t '.no_search_results' %>' + status);
  //       }
  //   });
  // }
    </script>

    <script src="https://maps.googleapis.com/maps/api/js?key=<%= ENV['GOOGLE_MAP_KEY'] %>&callback=initMap" async defer></script>
  
  <%= form.submit t('.contribute') %>
  <%= form.submit t('.back'), name: 'back' %>
<% end %>